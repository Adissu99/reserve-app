<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>All users</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.1.0/mdb.min.css" rel="stylesheet"/>
    <link type="text/css" th:href="@{/static/css/mystyle.css}" rel="stylesheet"/>
</head>
<body>
    <svg id="svg-background" class="position-absolute" viewBox="0 0 2560 880">
        <g>
            <linearGradient id="svg-gradient" x1="0" x2="1" y1="0" y2="0">
                <stop stop-color="hsl(217, 88%, 33.7%)" offset="0"></stop>
                <stop stop-color="hsl(217, 88%, 75.1%)" offset="1"></stop>
            </linearGradient>
            <path d="" fill="url(#svg-gradient)" opacity="0.4">
                <animate
                        attributeName="d"
                        dur="33s"
                        repeatCount="indefinite"
                        values="M0 0L 0 804.2328934685746Q 320 597.3613372284876  640 571.0708916590191T 1280 512.0661063245175T 2560 301.8788007488083L 2560 0 Z;M0 0L 0 877.6839081951588Q 320 668.0720922803877  640 649.0018928349388T 1280 328.7087077664202T 2560 162.95038242563396L 2560 0 Z;M0 0L 0 724.9886210051687Q 320 661.4364572061575  640 623.2173947479624T 1280 359.20353038907734T 2560 135.51673041732283L 2560 0 Z;M0 0L 0 804.2328934685746Q 320 597.3613372284876  640 571.0708916590191T 1280 512.0661063245175T 2560 301.8788007488083L 2560 0 Z"
                ></animate>
            </path>
            <path d="" fill="url(#svg-gradient)" opacity="0.4">
                <animate
                        attributeName="d"
                        dur="33s"
                        repeatCount="indefinite"
                        values="M0 0L 0 765.7607191473613Q 320 641.7853945676919  640 624.2534689988059T 1280 365.27264408032966T 2560 190.38947978522663L 2560 0 Z;M0 0L 0 842.1984196370487Q 320 570.6690721707517  640 540.6844954979398T 1280 439.92879442880593T 2560 200.29713960445451L 2560 0 Z;M0 0L 0 796.6802345094818Q 320 721.9216894353016  640 696.8815669355181T 1280 373.6367381440213T 2560 196.63169821789495L 2560 0 Z;M0 0L 0 765.7607191473613Q 320 641.7853945676919  640 624.2534689988059T 1280 365.27264408032966T 2560 190.38947978522663L 2560 0 Z"
                ></animate>
            </path>
            <path d="" fill="url(#svg-gradient)" opacity="0.4">
                <animate
                        attributeName="d"
                        dur="33s"
                        repeatCount="indefinite"
                        values="M0 0L 0 801.7562714943509Q 320 634.0247183381232  640 605.7090791951217T 1280 503.9393370140325T 2560 224.7551247480177L 2560 0 Z;M0 0L 0 821.0401780336218Q 320 670.8690783540507  640 637.0744123031742T 1280 456.40745286432224T 2560 278.1294357804296L 2560 0 Z;M0 0L 0 744.0534225112256Q 320 637.6425395409125  640 593.2079605185819T 1280 457.03995196824286T 2560 254.87693899994804L 2560 0 Z;M0 0L 0 801.7562714943509Q 320 634.0247183381232  640 605.7090791951217T 1280 503.9393370140325T 2560 224.7551247480177L 2560 0 Z"
                ></animate>
            </path>
            <path d="" fill="url(#svg-gradient)" opacity="0.4">
                <animate
                        attributeName="d"
                        dur="33s"
                        repeatCount="indefinite"
                        values="M0 0L 0 817.8603658675457Q 320 592.9404308081629  640 559.1126621853513T 1280 428.9912604821798T 2560 209.017381620229L 2560 0 Z;M0 0L 0 802.0504889976935Q 320 561.3963273210122  640 537.6024084387631T 1280 430.41283267566695T 2560 256.1972069733954L 2560 0 Z;M0 0L 0 789.4448177495887Q 320 561.9675446430498  640 531.6192318019404T 1280 414.76018143244175T 2560 265.9163329632971L 2560 0 Z;M0 0L 0 817.8603658675457Q 320 592.9404308081629  640 559.1126621853513T 1280 428.9912604821798T 2560 209.017381620229L 2560 0 Z"
                ></animate>
            </path>
            <path d="" fill="url(#svg-gradient)" opacity="0.4">
                <animate
                        attributeName="d"
                        dur="33s"
                        repeatCount="indefinite"
                        values="M0 0L 0 844.0541574423102Q 320 623.0697081316591  640 592.8483890737847T 1280 469.85448734523794T 2560 190.81850676853674L 2560 0 Z;M0 0L 0 871.4928294956283Q 320 618.9784567388518  640 593.1183717103518T 1280 376.5051942642811T 2560 141.32293927545027L 2560 0 Z;M0 0L 0 782.0118384610068Q 320 727.3267836497654  640 694.0476176759635T 1280 518.1545471640493T 2560 276.0053882957168L 2560 0 Z;M0 0L 0 844.0541574423102Q 320 623.0697081316591  640 592.8483890737847T 1280 469.85448734523794T 2560 190.81850676853674L 2560 0 Z"
                ></animate>
            </path>
        </g>
    </svg>

    <section class="vh-100" >
        <div class="container h-100">
            <div class="row d-flex justify-content-center align-items-center h-100">
                <div class="fade fade-delay-15">
                    <div class="card text-black opacity-80" style="border-radius: 25px;">
                        <div class="card-body p-md-5">
                            <div class="row justify-content-center">

                                <div class="col-md-10 col-lg-6 col-xl-12">
                                    <form name="make-admin-form" action="#" method="post" th:action="@{/admin/make-admin}">
                                        <p class="text-center h1 fw-bold mb-5 mx-1 mx-md-4 mt-4">Users</p>
                                        <div class="container debug">
                                            <div class="row d-flex flex-row align-items-center mb-4">
                                                <div class="col"><b>First Name</b></div>
                                                <div class="col"><b>Last Name</b></div>
                                                <div class="col"><b>Code used to register</b></div>
                                                <div class="col"><b>Email</b></div>
                                                <div class="col"><b>Password</b></div>
                                                <div class="col"><b>Cancelled Reservations</b></div>
                                                <div class="col"><b>Role</b></div>
                                                <div class="col"><b>Make Admin</b></div>
                                            </div>
                                            <div class="row d-flex flex-row align-items-center mb-4" th:if="${users != null}" th:each="user : ${users}">
                                                <div class="col" th:text="${user.getFirstName()}"></div>
                                                <div class="col" th:text="${user.getLastName()}"></div>
                                                <div class="col" th:text="${user.getCodeUsedToRegister()}"></div>
                                                <div class="col" th:text="${user.getEmail()}"></div>
                                                <div class="col" th:text="${user.getPassword()}"></div>
                                                <div class="col" th:text="${cancelledReservationsMap.get(user.getId())}"></div>
                                                <div class="col" th:text="${user.getRole()}"></div>
                                                <div class="col d-flex justify-content-center">
                                                    <button type="submit" class="btn btn-primary btn-rounded btn-lg align-self-center" name="userIdAdmin" th:value="${user.getId()}" th:disabled="${user.getRole().equals('admin')}">Make Admin</button>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>

                                <div class="col-md-10 col-lg-6 col-xl-5">
                                    <form name="check-user-chain" action="#" method="get" th:action="@{/admin/user-chain}">
                                        <p class="text-center h1 fw-bold mb-5 mx-1 mx-md-4 mt-4">Trace the invitation chain for the invited users</p>
                                        <div class="container" th:unless="${invitedClients.isEmpty()}">
                                            <div class="row d-flex flex-row align-items-center mb-4">
                                                <div class="col">
                                                    <div class="md-form">
                                                        <select class="mdb-select" name="selected-user-id" id="selected-user-id">
                                                            <option value="nothing" disabled selected>Select user</option>
                                                            <th:block th:each="user : ${users}">
                                                                <option th:if="${!user.getCodeUsedToRegister().equals('ADMIN')}" th:value="${user.getId()}" th:text="${user.getEmail()}"></option>
                                                            </th:block>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col d-flex justify-content-center">
                                                    <button type="submit" class="btn btn-primary btn-rounded btn-lg align-self-center">Check user invite chain</button>
                                                </div>
                                            </div>
                                            <p class="text-center h1 fw-bold mb-5 mx-1 mx-md-4 mt-4" th:if="${invitedClients.isEmpty()}">There are no users registered using an invite code.</p>
                                        </div>
                                    </form>
                                </div>

                                <div class="col-md-10 col-lg-6 col-xl-5">
                                    <form name="invited-clients-chain" th:if="${result != null && result.equals(T(com.adissu.reserve.constants.ResultConstants).SUCCESS_CHAIN)}">
                                        <p class="text-center h1 fw-bold mb-5 mx-1 mx-md-4 mt-4">User chain</p>
                                        <div class="container">
                                            <div class="row d-flex flex-row align-items-center mb-4">
                                                <div class="col"><b>Full Name</b></div>
                                                <div class="col"><b>Email</b></div>
                                            </div>
                                            <div class="row d-flex flex-row align-items-center mb-4" th:if="${userChainList != null}" th:each="invUser : ${userChainList}">
                                                <div class="col" th:text="${invUser.getFirstName() + ' ' + invUser.getLastName()}"></div>
                                                <div class="col" th:text="${invUser.getEmail()}"></div>
                                            </div>
                                        </div>
                                    </form>
                                </div>

                                <a class="btn btn-danger btn-rounded btn-lg mb-5 mt-auto" th:href="@{/admin-index}" role="button">
                                    Go back
                                </a>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

</body>
</html>